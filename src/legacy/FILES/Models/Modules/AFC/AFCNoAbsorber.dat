// WARNING *** I HAVE BEEN CAREFUL TO GET THIS RIGHT
//         *** JUST DONT BREAK IT!
//
// I think I fixed the AFC module, which was a complete mess.
//
// The curvature shape came from communication with Wing about 3 years ago. I hope it's still correct. 
//
// The tests I did to make sure the new geometry was reasonable:
//
// (i) I ran with datacard 
// CheckVolumeOverlaps 1
// This uses GEANT4 internal routine to check for overlaps between different GEANT4 volumes.
// 
// (ii) I plotted energy deposited vs (z,r) for different emittance samples and checked that they lose energy where I expect and don't lose energy where I don't expect.
// 
// (iii) I made some visualisations and checked it looks reasonable. Copper is red, Aluminium is white, lH2 is blue.
// 
// (iv) I plotted the energy on axis vs z for a reference particle (no stochastics) and checked it looked reasonable.
// 
// Notes:
// - I don't implement the Mylar bullet proofing.
// - I do not take responsibility for maintaining this geometry file.
//
// CTR - 2010-03-02


Module AbsorberFocusCoil
{
  Volume Cylinder
  Dimensions 76.0 84.4 cm
  PropertyBool Invisible 1
  PropertyString Material Galactic
  Module AFC/AlVessel.dat
  {
    Position 0.0 0.0 0.0 mm
    Rotation 0.0 0.0 0.0 degree
  }
  Module AFC/AFCCryostat.dat
  {
    Position 0.0 0.0 0.0 mm
    Rotation 0.0 0.0 0.0 degree
    Module AFC/FCoil.dat
    {
      Position 0.0 0.0 -205.0 mm
      Rotation 0.0 0.0 0.0 degree
      ScaleFactor 113.95
    }
    Module AFC/FCoil.dat
    {
      Position 0.0 0.0 205.0 mm
      Rotation 0.0 0.0 0.0 degree
      ScaleFactor -113.95
    }  
  }
  Module AFC/AlWindowAbsFlange.dat
  {
    Position 0.0 0.0 136 mm
    Rotation 0.0 0.0 0.0 degree
  }
  Module AFC/AlWindowAbsFlange.dat
  {
    Position 0.0 0.0 -136 mm
    Rotation 0.0 0.0 0.0 degree
  }
  Module AFC/AlWindowAbsPolycone.dat
  {
    Position 0.0 0.0 175.15 mm
    Rotation 0.0 180.0 0.0 degree
  }
  Module AFC/AlWindowAbsPolycone.dat
  {
    Position 0.0 0.0 -175.15 mm
    Rotation 0.0 0.0 0.0 degree
  }
  Module AFC/AlWindowVacFlange.dat
  {
    Position 0.0 0.0 308+5-50 mm
    Rotation 0.0 0.0 0.0 degree
  }
  Module AFC/AlWindowVacFlange.dat
  {
    Position 0.0 0.0 -308-5+50 mm
    Rotation 0.0 0.0 0.0 degree
  }
  Module AFC/AlWindowVacPolycone.dat
  {
    Position 0.0 0.0 308.0 mm
    Rotation 0.0 180.0 0.0 degree
  }
  Module AFC/AlWindowVacPolycone.dat
  {
    Position 0.0 0.0 -308.0 mm
    Rotation 0.0 0.0 0.0 degree
  }
}

