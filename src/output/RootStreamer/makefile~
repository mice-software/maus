#old waY
#g++ -o main main.cxx DataDict.C MsgStream.cxx rstream.cxx orstream.cxx irstream.cxx -I. `root-config --libs --cflags`

all:
	rootcint -f DataDict.C -c struct.h LinkDef.h
	g++ -c -fPIC -DTESTING -DEXINCL -o rstream.o rstream.cxx -I. `root-config --libs --cflags` `alex-config --libs --cflags MsgStream`
	g++ -c -fPIC -DTESTING -DEXINCL -DEXSETBRANCH -o orstream.o orstream.cxx -I. `root-config --libs --cflags` `alex-config --libs --cflags MsgStream`
	g++ -c -fPIC -DTESTING -DEXINCL -DEXSETBRANCH -DEXBRANCHNAME -o irstream.o irstream.cxx -I. `root-config --libs --cflags` `alex-config --libs --cflags MsgStream`
	#g++ -c -fPIC -o MsgStream.o MsgStream.cxx -I.
	g++ -shared -fPIC -Wl,librstream.so -o librstream.so rstream.o orstream.o irstream.o -I. `root-config --libs --cflags` `alex-config --libs --cflags MsgStream`
	g++ -o main main.cxx DataDict.C -I. -L. -lrstream `root-config --libs --cflags` `alex-config --libs --cflags MsgStream`
	rm -f *.o

clean:
	rm -f main
	rm -f *.so
	rm -f DataDict.*
	rm -f *.d