<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
<!--++++++++++++++++++++++++++++++++++BASE TYPES+++++++++++++++++++++++++++++++++++++++++-->
    <xs:complexType name="G4MagnetType">
        <xs:attribute name="Name"/>
        <xs:attribute name="Type"/>
        <xs:attribute name="File_Location"/>        
    </xs:complexType>
    <xs:complexType name="TOFType">
        <xs:attribute name="TOF"/>
    </xs:complexType>
    <xs:complexType name="KLType">
        <xs:attribute name="KL"/>
    </xs:complexType>
    <xs:complexType name="CherenkovType">
        <xs:attribute name="Cherenkov"/>        
    </xs:complexType>
    <xs:complexType name="TrackerType">
        <xs:attribute name="Tracker"/>
    </xs:complexType>
    <xs:complexType name="runMagnetType">
        <xs:attribute name="name" use="required" type="xs:NCName"/>
        <xs:attribute name="polarity" use="required" type="xs:NCName"/>
        <xs:attribute name="setCurrent" use="required" type="xs:decimal"/>
    </xs:complexType>
<!--+++++++++++++++++++++++++++++++++++MIDDLE TYPES++++++++++++++++++++++++++++++++++++++++-->
    <xs:complexType name ="configurationType">
        <xs:sequence>
            <xs:element name="run">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="magnet" type="runMagnetType" minOccurs="0"/>                        
                    </xs:sequence>
                    <xs:attribute name="daqGateWidth" use="required" type="xs:decimal"/>
                    <xs:attribute name="daqTrigger" use="required" type="xs:integer"/>
                    <xs:attribute name="daqVersion" use="required" type="xs:decimal"/>
                    <xs:attribute name="endTime" use="required"/>
                    <xs:attribute name="isisBeamPositionX" use="required" type="xs:NCName"/>
                    <xs:attribute name="isisBeamPositionY" use="required" type="xs:NCName"/>
                    <xs:attribute name="isisNominalBeamCurrent" use="required" type="xs:decimal"/>
                    <xs:attribute name="isisNominalBeamLoss" use="required" type="xs:decimal"/>
                    <xs:attribute name="isisRepRate" use="required" type="xs:decimal"/>
                    <xs:attribute name="isisTargetFrequency" use="required" type="xs:integer"/>
                    <xs:attribute name="notes" use="required"/>
                    <xs:attribute name="optics" use="required" type="xs:NCName"/>
                    <xs:attribute name="protonAbsorberThickness" use="required" type="xs:NCName"/>
                    <xs:attribute name="pulseEnd" use="required" type="xs:integer"/>
                    <xs:attribute name="pulseStart" use="required" type="xs:integer"/>
                    <xs:attribute name="runNumber" use="required" type="xs:integer"/>
                    <xs:attribute name="runType" use="required" type="xs:NCName"/>
                    <xs:attribute name="startTime" use="required"/>
                    <xs:attribute name="status" use="required" type="xs:boolean"/>
                    <xs:attribute name="step" use="required" type="xs:decimal"/>
                    <xs:attribute name="targetDelay" use="required" type="xs:decimal"/>
                    <xs:attribute name="targetDepth" use="required" type="xs:decimal"/>
                    <xs:attribute name="targetDriveVoltage" use="required" type="xs:decimal"/>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="G4Field_InformationType">
        <xs:sequence>
            <xs:element name="G4Magnet_info" type="G4MagnetType" minOccurs="0" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="Detector_InformationType">
        <xs:sequence>
            <xs:element name="TOF" maxOccurs="3"/>
            <xs:element name="KL"/>
            <xs:element name="Cherenkov"/>
            <xs:element name="Tracker" type="TrackerType" maxOccurs="2"/>
        </xs:sequence>
    </xs:complexType>
<!--++++++++++++++++++++++++++++++++++TOP TYPES+++++++++++++++++++++++++++++++++++++++++-->
    <xs:element name="MICE_Information">
        <xs:annotation>
            <xs:documentation>
                This Information is need for the MICE experiment. It is
                translated through the CAD to Software translation system
                and is need for simulations. Some of this information comes
                direct from the control room and some is stored in MAUS 
                and combined with geometrical information from CADs.
            </xs:documentation>
        </xs:annotation>
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Configuration_Information" type="configurationType" minOccurs="0">
                </xs:element>
                <xs:element name="G4Field_Information" type="G4Field_InformationType" minOccurs="0"/>
                <xs:element name="Detector_Information" type="Detector_InformationType" minOccurs="0"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema>
