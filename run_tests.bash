#!/bin/bash
set -e

if [ -z "${MAUS_ROOT_DIR}" ]; then  # see if the variable exists yet
    echo "ERROR: \$MAUS_ROOT_DIR not set"
    exit 1;
fi

echo "Your current directory is:"
pwd
echo
echo "Your MAUS_ROOT_DIR is:"
echo ${MAUS_ROOT_DIR}
echo
echo "These should agree"

lcov -b ${MAUS_ROOT_DIR} --directory src --zerocounters
nosetests --with-coverage build
lcov  -b ${MAUS_ROOT_DIR} --directory src --capture --output-file maus.info
genhtml -o doc/coverage/ maus.info

# generated by: find bin -type f -executable | grep -v \~
#bin/load_test.py
#bin/simulate_mice.py
