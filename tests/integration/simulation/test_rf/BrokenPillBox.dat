// Pillbox configuration

Configuration PillBox
{
  Substitution $WindowThickness 0.1
  Substitution $RFLength 500.

  Dimensions 10 10 1000 m
  PropertyString Material Galactic

  MiceModule PillBox
  {
    PropertyString Volume Cylinder
    PropertyHep3Vector Dimensions 600. $WindowThickness+$RFLength 0. mm
    PropertyHep3Vector Position 0.0 0.0 -1500.+1000.*@RepeatNumber mm
    PropertyString Material Galactic
    PropertyBool   RepeatModule2 1
    PropertyInt    NumberOfRepeats 100

    MiceModule RFWindowUS
    {
      PropertyString Volume Cylinder
      PropertyHep3Vector Dimensions 600. $WindowThickness 0. mm
      PropertyHep3Vector Position 0.0 0.0 -$RFLength/2. mm
      PropertyString Material Galactic
    }
    MiceModule Field
    {
      Volume None
      PropertyString FieldType PillBox
      PropertyDouble Length 500. mm
      PropertyString CavityMode Unphased
      PropertyString FieldDuringPhasing TimeVarying
      PropertyDouble Frequency 201.25 MHz
      PropertyDouble PeakEField 15 MV/m 
    }
    MiceModule RFWindowDS
    {
      PropertyString Volume Cylinder
      PropertyHep3Vector Dimensions 600.  $WindowThickness 0. mm
      PropertyHep3Vector Position 0.0 0.0 +$RFLength/2. mm
      PropertyString Material Galactic
    }
  }

  MiceModule Virtuals
  {
    PropertyString Volume None
    PropertyString SensitiveDetector Virtual
    PropertyHep3Vector Position 0.0 0.0 200.*@RepeatNumber mm
    PropertyBool   RepeatModule2 1
    PropertyInt    NumberOfRepeats 300
  }
}


